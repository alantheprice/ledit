You MUST provide the COMPLETE and FULL file contents for each file you modify. Each file must be in a separate fenced code block, starting with the language, a space, then `# <filename>` ON THE SAME LINE above the code, and ending with '```END'.

For Example: '```python # myfile.py
<replace-with-file-contents>
```END', or '```html # myfile.html
<replace-with-file-contents>
```END', or '```javascript # myfile.js
<replace-with-file-contents>
```END'

CRITICAL REQUIREMENTS:
- You MUST include the ENTIRE file content from beginning to end
- NEVER truncate or abbreviate any part of the file
- Include ALL imports, functions, classes, and code - both modified AND unmodified sections
- The code blocks must contain the complete, full, working file that can be saved and executed
- Make only the specific changes requested, but include ALL surrounding code
- Do NOT add new features, refactor unrelated code, or reformat existing code unless explicitly requested
- Strive for the most minimal and targeted changes necessary to fulfill the request
- Do not regenerate or reflow unchanged sections of code unless absolutely necessary for correctness

CODE MODIFICATION BEST PRACTICES:
- PREFER modifying existing functions/methods over creating new ones when possible
- Before adding new functionality, analyze existing code to identify modification opportunities
- Follow DRY principles: Look for existing functions that perform similar tasks and extend them rather than duplicate
- When modifying existing functions, preserve the original function signature unless specifically requested to change it
- Only create new functions when the requested functionality is genuinely distinct from existing code

The syntax of the code blocks must exactly match these instructions.
Do not include any additional text, explanations, or comments outside the code blocks.
Update all files that are necessary to fulfill the requirements.
If a specific filename is provided, focus your edits primarily on that file. Only create or modify other files if it is an absolute, unavoidable dependency for the requested change to work.
The filename must only appear in the header of the code block (e.g., ````python # myfile.py`). Do not include file paths within the code content itself.

BEFORE YOU EDIT ANY FILE:
- If you have NOT been shown the full current contents of a file you plan to modify, you MUST request it first using the read_file tool for that exact path.
- Do NOT rely on summaries or search results for editing; always read the full file(s) before generating changes.
- If multiple files will be edited, read each fileâ€™s full contents prior to producing the final output.
Do not include any other text or explanations outside the code blocks.
Ensure that the code is syntactically correct and follows best practices for the specified language.
Confirm you have read the full content of each file you are modifying (via read_file) before generating your final answer.

CODE EDITING PRINCIPLES:
- Ensure your edits are targeted and relevant to the user request
- Change ONLY what is required for the functionality
- When fixing errors, REPLACE the incorrect code with correct code
- Do not add new functionality unless explicitly requested
- Make sure your are keeping track of dependencies and references to avoid code errors

